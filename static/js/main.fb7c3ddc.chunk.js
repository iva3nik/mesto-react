(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),s=a(6),i=a.n(s),o=(a(14),a(9)),r=a(2),u=a.p+"static/media/vector.03b78ada.svg",l=a(0);var p=function(){return Object(l.jsx)("header",{className:"header page__center",children:Object(l.jsx)("img",{src:u,alt:"\u041b\u043e\u0433\u043e \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u0438",className:"header__logo"})})},d=c.a.createContext();var _=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,s=e.onCardDelete,i=c.a.useContext(d),o=t.owner._id===i._id,r="card__trash ".concat(o?"card__trash_active":""),u=t.likes.some((function(e){return e._id===i._id})),p="card__like ".concat(u?"card__like_active":"");return Object(l.jsxs)("div",{className:"card",id:t._id,children:[Object(l.jsx)("img",{src:t.link,alt:t.name,className:"card__element",onClick:function(){a(t)}}),Object(l.jsx)("button",{className:r,type:"button","aria-label":"card-trash",onClick:function(){s(t)}}),Object(l.jsxs)("div",{className:"card__info",children:[Object(l.jsx)("h2",{className:"card__title",children:t.name}),Object(l.jsxs)("div",{className:"card__column-like",children:[Object(l.jsx)("button",{className:p,type:"button","aria-label":"like-heart",onClick:function(){n(t)}}),Object(l.jsx)("div",{className:"card__count",children:t.likes.length})]})]})]})};var b=function(e){var t=e.onEditAvatar,a=e.onEditProfile,n=e.onAddPlace,s=e.onCardClick,i=e.cards,o=e.onCardLike,r=e.onCardDelete,u=c.a.useContext(d);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("section",{className:"profile page__center",children:[Object(l.jsxs)("div",{className:"profile__column",children:[Object(l.jsx)("img",{src:u.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"profile__avatar"}),Object(l.jsx)("button",{className:"profile__avatar-edit",type:"button",onClick:t}),Object(l.jsxs)("div",{className:"profile__info",children:[Object(l.jsxs)("div",{className:"profile__row",children:[Object(l.jsx)("h1",{className:"profile__name",children:u.name}),Object(l.jsx)("button",{className:"profile__button-edit-name",type:"button","aria-label":"edit-name",onClick:a})]}),Object(l.jsx)("p",{className:"profile__text",children:u.about})]})]}),Object(l.jsx)("button",{className:"profile__button",type:"button","aria-label":"add-card",onClick:n})]}),Object(l.jsx)("section",{className:"elements page__center",children:i.map((function(e){return Object(l.jsx)(_,{card:e,onCardClick:s,onCardLike:o,onCardDelete:r},e._id)}))})]})};var h=function(){return Object(l.jsx)("footer",{className:"footer page__center",children:Object(l.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})};var m=function(e){var t=e.title,a=e.name,n=e.children,c=e.isOpen,s=e.buttonSubmit,i=e.onClose,o=e.onSubmit,r=e.isLoading,u=e.buttonSubmitLoading;return Object(l.jsx)("div",{className:"popup popup_".concat(a," ").concat(c?"popup_opened":""),children:Object(l.jsxs)("div",{className:"popup__container popup__container_form",children:[Object(l.jsx)("h2",{className:"popup__title",children:t}),Object(l.jsxs)("form",{className:"popup__edit-profile",name:a,onSubmit:o,noValidate:!0,children:[n,Object(l.jsx)("button",{className:"popup__save",type:"submit",children:r?u:s})]}),Object(l.jsx)("button",{className:"popup__close-form",type:"button","aria-label":"close-form",onClick:i})]})})};var j=function(e){var t=e.card,a=e.onClose;return Object(l.jsx)("div",{className:"popup popup_view ".concat(t?"popup_opened":""),children:Object(l.jsxs)("div",{className:"popup__container",children:[Object(l.jsxs)("figure",{className:"popup__window",children:[Object(l.jsx)("img",{src:null===t||void 0===t?void 0:t.link,alt:null===t||void 0===t?void 0:t.name,className:"popup__image"}),Object(l.jsx)("figcaption",{className:"popup__about",children:null===t||void 0===t?void 0:t.name})]}),Object(l.jsx)("button",{className:"popup__close-form",type:"button","aria-label":"close-view",onClick:a})]})})};var f=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,s=e.isLoading,i=c.a.useContext(d),o=c.a.useState(""),u=Object(r.a)(o,2),p=u[0],_=u[1],b=c.a.useState(""),h=Object(r.a)(b,2),j=h[0],f=h[1];return c.a.useEffect((function(){i.about&&i.name&&(_(i.name),f(i.about))}),[i]),Object(l.jsxs)(m,{name:"edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",buttonSubmit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonSubmitLoading:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:p,about:j})},isLoading:s,children:[Object(l.jsxs)("label",{className:"popup__field",children:[Object(l.jsx)("input",{type:"text",id:"name-input",className:"popup__item-profile popup__item-profile_input_name",name:"name",placeholder:"\u0418\u043c\u044f \u043f\u0440\u043e\u0444\u0438\u043b\u044f",minLength:"2",maxLength:"40",value:p,onChange:function(e){_(e.target.value)},required:!0}),Object(l.jsx)("span",{className:"popup__input-error name-input-error"})]}),Object(l.jsxs)("label",{className:"popup__field",children:[Object(l.jsx)("input",{type:"text",id:"about-input",className:"popup__item-profile popup__item-profile_input_job",name:"about",placeholder:"\u041e \u043f\u0440\u043e\u0444\u0438\u043b\u0435",minLength:"2",maxLength:"200",value:j,onChange:function(e){f(e.target.value)},required:!0}),Object(l.jsx)("span",{className:"popup__input-error about-input-error"})]})]})};var O=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,s=e.isLoading,i=c.a.useRef("");return Object(l.jsx)(m,{name:"update-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",buttonSubmit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",buttonSubmitLoading:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({avatar:i.current.value},(function(){i.current.value=""}))},isLoading:s,children:Object(l.jsxs)("label",{className:"popup__field",children:[Object(l.jsx)("input",{type:"url",id:"url-input-avatar",className:"popup__item-profile popup__item-profile_input_job",defaultValue:"",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",ref:i,required:!0}),Object(l.jsx)("span",{className:"popup__input-error url-input-avatar-error"})]})})};var v=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,s=e.isLoading,i=c.a.useState(""),o=Object(r.a)(i,2),u=o[0],p=o[1],d=c.a.useState(""),_=Object(r.a)(d,2),b=_[0],h=_[1];function j(){p(""),h("")}return Object(l.jsxs)(m,{name:"add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",buttonSubmit:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",buttonSubmitLoading:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),n({name:u,link:b},j)},isLoading:s,children:[Object(l.jsxs)("label",{className:"popup__field",children:[Object(l.jsx)("input",{type:"text",id:"name-place-input",className:"popup__item-profile popup__item-profile_input_name",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",value:u,onChange:function(e){p(e.target.value)},required:!0}),Object(l.jsx)("span",{className:"popup__input-error name-place-input-error"})]}),Object(l.jsxs)("label",{className:"popup__field",children:[Object(l.jsx)("input",{type:"url",id:"url-input",className:"popup__item-profile popup__item-profile_input_job",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:b,onChange:function(e){h(e.target.value)},required:!0}),Object(l.jsx)("span",{className:"popup__input-error url-input-error"})]})]})},x=a(7),g=a(8),C=new(function(){function e(t){Object(x.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(g.a)(e,[{key:"_checkStatusResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getDataUser",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then(this._checkStatusResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkStatusResponse)}},{key:"patchDataUser",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._checkStatusResponse)}},{key:"addNewCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkStatusResponse)}},{key:"removeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkStatusResponse)}},{key:"renewAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkStatusResponse)}},{key:"changeLikeCardStatus",value:function(e,t){return t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkStatusResponse):fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkStatusResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-22",headers:{authorization:"62eee554-aa82-42a2-9129-40e083fc85ea","Content-Type":"application/json"}});var N=function(){var e=c.a.useState(!1),t=Object(r.a)(e,2),a=t[0],n=t[1],s=c.a.useState(!1),i=Object(r.a)(s,2),u=i[0],_=i[1],x=c.a.useState(!1),g=Object(r.a)(x,2),N=g[0],k=g[1],S=c.a.useState(null),y=Object(r.a)(S,2),L=y[0],U=y[1],P=c.a.useState({}),w=Object(r.a)(P,2),D=w[0],E=w[1],A=c.a.useState([]),R=Object(r.a)(A,2),T=R[0],q=R[1],F=c.a.useState(!1),J=Object(r.a)(F,2),I=J[0],B=J[1];function H(){n(!1),_(!1),k(!1),U(null)}return c.a.useEffect((function(){Promise.all([C.getDataUser(),C.getInitialCards()]).then((function(e){var t=Object(r.a)(e,2),a=t[0],n=t[1];E(a),q(n)})).catch((function(e){return console.log(e)}))}),[]),Object(l.jsx)(d.Provider,{value:D,children:Object(l.jsx)("div",{className:"page",children:Object(l.jsxs)("div",{className:"page__container page__center",children:[Object(l.jsx)(p,{}),Object(l.jsx)(b,{onEditAvatar:function(){k(!0)},onEditProfile:function(){n(!0)},onAddPlace:function(){_(!0)},onCardClick:function(e){U(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===D._id}));C.changeLikeCardStatus(e._id,!t).then((function(t){q((function(a){return a.map((function(a){return a._id===e._id?t:a}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){e.owner._id===D._id&&C.removeCard(e._id).then((function(t){q((function(t){return t.filter((function(t){return t._id!==e._id}))}))})).catch((function(e){return console.log(e)}))},cards:T}),Object(l.jsx)(h,{}),Object(l.jsxs)("section",{className:"popups",children:[Object(l.jsx)(f,{isOpen:a,onClose:H,onUpdateUser:function(e){B(!0),C.patchDataUser(e).then((function(e){E(e),H()})).catch((function(e){return console.log(e)})).finally((function(){return B(!1)}))},isLoading:I}),Object(l.jsx)(v,{isOpen:u,onClose:H,onAddPlace:function(e,t){B(!0),C.addNewCard(e).then((function(e){q([e].concat(Object(o.a)(T))),H(),t()})).catch((function(e){return console.log(e)})).finally((function(){return B(!1)}))},isLoading:I}),Object(l.jsx)(m,{name:"confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonSubmit:"\u0414\u0430",buttonSubmitLoading:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",onClose:H,isLoading:I}),Object(l.jsx)(O,{isOpen:N,onClose:H,onUpdateAvatar:function(e,t){B(!0),C.renewAvatar(e.avatar).then((function(e){E(e),H(),t()})).catch((function(e){return console.log(e)})).finally((function(){return B(!1)}))},isLoading:I}),Object(l.jsx)(j,{onClose:H,card:L})]})]})})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),s(e),i(e)}))};i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.fb7c3ddc.chunk.js.map